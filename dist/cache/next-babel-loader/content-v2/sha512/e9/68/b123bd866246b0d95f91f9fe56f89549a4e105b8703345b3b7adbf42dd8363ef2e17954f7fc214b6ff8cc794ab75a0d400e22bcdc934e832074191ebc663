{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/apple/Documents/Projects/itguymax/shakazz/dev/shakaa-web-app-new-version/shakazz-web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/apple/Documents/Projects/itguymax/shakazz/dev/shakaa-web-app-new-version/shakazz-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/apple/Documents/Projects/itguymax/shakazz/dev/shakaa-web-app-new-version/shakazz-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useRef, useEffect } from \"react\"; // reactstrap components\n\nimport { Button, Card, CardBody, FormGroup, Form, Row, Col } from \"reactstrap\";\nimport { signup } from '../../services/auth.service'; // layout for this page\n\nimport Auth from \"../../layouts/Auth.js\";\nimport { useRouter } from 'next/router';\nimport Sbutton from \"../../components/forms/Sbutton\";\nimport Sdropdown from \"../../components/forms/Sdropdown\";\nimport Captcha from \"../../components/Captcha\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport Sinput from \"../../components/forms/Sinput\";\nimport { registrationSchema } from \"../../validations\";\nvar options = [{\n  key: 'JennyHess',\n  text: 'JennyHess',\n  value: 'JennyHess',\n  image: {\n    avatar: true,\n    src: require(\"../../public/img/theme/react.jpg\")\n  }\n}, {\n  key: 'ElliotFu',\n  text: 'ElliotFu',\n  value: 'ElliotFu',\n  image: {\n    avatar: true,\n    src: require(\"../../public/img/theme/react.jpg\")\n  }\n}, {\n  key: 'StevieFel',\n  text: 'StevieFel',\n  value: 'StevieFel',\n  image: {\n    avatar: true,\n    src: require(\"../../public/img/theme/react.jpg\")\n  }\n}, {\n  key: 'Christian',\n  text: 'Christian',\n  value: 'Christian',\n  image: {\n    avatar: true,\n    src: require(\"../../public/img/theme/react.jpg\")\n  }\n}];\n\nfunction Register(_ref) {\n  var user = _ref.user;\n\n  var _useForm = useForm({\n    resolver: yupResolver(registrationSchema)\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      watch = _useForm.watch,\n      errors = _useForm.errors;\n\n  var router = useRouter();\n  var recaptchaRef = useRef();\n\n  var _useState = useState(true),\n      isParticular = _useState[0],\n      setProfil = _useState[1];\n\n  var _useState2 = useState(false),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  var _useState3 = useState(false),\n      showc = _useState3[0],\n      setShowc = _useState3[1];\n\n  var _useState4 = useState(false),\n      verified = _useState4[0],\n      setVerified = _useState4[1];\n\n  var _useState5 = useState(null),\n      errormsg = _useState5[0],\n      setErrormsg = _useState5[1];\n\n  var _useState6 = useState(null),\n      successmsg = _useState6[0],\n      setSuccessmsg = _useState6[1];\n\n  var _useState7 = useState(null),\n      additionaldata = _useState7[0],\n      setUserAdditionalData = _useState7[1];\n\n  var _useState8 = useState(false),\n      submitting = _useState8[0],\n      setSubmitting = _useState8[1];\n\n  var _useState9 = useState(options[Math.floor(Math.random() * options.length)]),\n      selectedOption = _useState9[0],\n      setSelectedOption = _useState9[1];\n\n  var togglebg = {\n    backgroundColor: isParticular ? '#CC9933' : '#fff'\n  };\n\n  var handleParainOption = function handleParainOption(value) {\n    setSelectedOption(value);\n  };\n\n  var handletoggle = function handletoggle() {\n    return setProfil(!isParticular);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var userdata, password, email, companyName, term, userName, lastName, firstName, datares, _data, error, success, message;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!verified) {\n                _context.next = 18;\n                break;\n              }\n\n              setSubmitting(true);\n              password = data.password, email = data.email, companyName = data.companyName, term = data.term, userName = data.userName, lastName = data.lastName, firstName = data.firstName;\n              userdata = _objectSpread(_objectSpread({}, additionaldata), {}, {\n                password: password,\n                email: email,\n                companyName: companyName,\n                term: term,\n                userName: userName,\n                lastName: lastName,\n                firstName: firstName\n              });\n              _context.prev = 4;\n              _context.next = 7;\n              return signup(userdata);\n\n            case 7:\n              datares = _context.sent;\n              _data = datares.data, error = datares.error, success = datares.success, message = datares.message;\n\n              if (error && !success) {\n                setSuccessmsg(null);\n                setErrormsg(message);\n              } else {\n                setErrormsg(null);\n                setSuccessmsg(message);\n                router.push('/portal/dashboard');\n              }\n\n              console.log(\"data\", _data);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              console.log(\"error\", _context.t0);\n\n            case 16:\n              _context.next = 19;\n              break;\n\n            case 18:\n              alert(\"Vous  n'Ãªtes pas humain\");\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 13]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleToggleshow = function handleToggleshow() {\n    return setShow(!show);\n  };\n\n  var handleToggleshowc = function handleToggleshowc() {\n    return setShowc(!showc);\n  };\n\n  var executeCaptcha = function executeCaptcha() {\n    return setVerified(!verified);\n  };\n\n  var handleOnBlur = function handleOnBlur() {\n    console.log(\"blur\");\n  };\n\n  useEffect(function () {\n    var addData = {\n      profil: isParticular ? \"Particulier\" : \"Entreprise\",\n      parent: selectedOption.key\n    };\n    setUserAdditionalData(addData);\n  }, [selectedOption, isParticular]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Row, {\n      children: /*#__PURE__*/_jsx(Card, {\n        className: \"bg-white container border-0\",\n        style: {\n          minWidth: '100%'\n        },\n        children: /*#__PURE__*/_jsx(CardBody, {\n          className: \"px-lg-5 py-lg-2\",\n          children: /*#__PURE__*/_jsxs(Form, {\n            role: \"form\",\n            onSubmit: handleSubmit(onSubmit),\n            children: [/*#__PURE__*/_jsxs(Row, {\n              className: \"justify-content-between\",\n              children: [/*#__PURE__*/_jsx(Col, {\n                className: \"col-auto ml-2\",\n                children: /*#__PURE__*/_jsxs(FormGroup, {\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    children: \"Votre profil\"\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \" row \",\n                    children: [/*#__PURE__*/_jsx(Sbutton, {\n                      label: \"Particulier\",\n                      style: {\n                        backgroundColor: isParticular ? '#FFCC00' : '#fff',\n                        fontWeight: isParticular ? 'bold' : 'normal'\n                      },\n                      onClick: handletoggle\n                    }), /*#__PURE__*/_jsx(Sbutton, {\n                      style: {\n                        backgroundColor: !isParticular ? '#FFCC00' : '#fff',\n                        fontWeight: !isParticular ? 'bold' : 'normal'\n                      },\n                      onClick: handletoggle,\n                      label: \"Entreprise\"\n                    })]\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(Col, {\n                className: \"col-auto\",\n                children: /*#__PURE__*/_jsxs(FormGroup, {\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    children: \"Votre parain\"\n                  }), router.query.ref ? /*#__PURE__*/_jsx(\"div\", {\n                    className: \"d-flex justify-content-between align-items-center mr-0\",\n                    style: {\n                      width: '250px',\n                      padding: '5px',\n                      backgroundColor: '#f5f5f5',\n                      borderRadius: '5px'\n                    },\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"d-flex align-items-center\",\n                      children: [/*#__PURE__*/_jsx(\"img\", {\n                        className: \"avatar avatar-sm mr-2\",\n                        alt: options[0].userName,\n                        src: options[0].image.src\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"d-flex\",\n                        style: {\n                          flexDirection: 'column'\n                        },\n                        children: [/*#__PURE__*/_jsx(\"small\", {\n                          className: \"mb-0\",\n                          children: options[0].userName\n                        }), /*#__PURE__*/_jsxs(\"div\", {\n                          className: \"d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsx(\"small\", {\n                            children: \"Flag\"\n                          }), /*#__PURE__*/_jsx(\"small\", {\n                            children: \"Online\"\n                          })]\n                        })]\n                      })]\n                    })\n                  }) : /*#__PURE__*/_jsx(Sdropdown, {\n                    register: register,\n                    options: options,\n                    selectedOption: selectedOption,\n                    name: \"parain\",\n                    onSelectParain: handleParainOption\n                  })]\n                })\n              })]\n            }), isParticular ? /*#__PURE__*/_jsxs(Row, {\n              children: [/*#__PURE__*/_jsxs(Col, {\n                children: [/*#__PURE__*/_jsx(Sinput, {\n                  label: \"Pr\\xE9nom\",\n                  name: \"firstName\",\n                  placeholder: \"Entrez votre pr\\xE9nom\",\n                  type: \"text\",\n                  register: register\n                }), errors.firstName && /*#__PURE__*/_jsx(\"div\", {\n                  className: \"text-muted font-italic\",\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    className: \"text-danger font-weight-700\",\n                    children: errors.firstName.message\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(Col, {\n                children: [/*#__PURE__*/_jsx(Sinput, {\n                  label: \"Nom\",\n                  name: \"lastName\",\n                  placeholder: \"Entrez votre nom\",\n                  type: \"text\",\n                  register: register\n                }), errors.lastName && /*#__PURE__*/_jsx(\"div\", {\n                  className: \"text-muted font-italic\",\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    className: \"text-danger font-weight-700\",\n                    children: errors.lastName.message\n                  })\n                })]\n              })]\n            }) : /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(Sinput, {\n                label: \"Nom de l'entreprise\",\n                name: \"companyName\",\n                placeholder: \"Entrez le nom de l'entreprise\",\n                type: \"text\",\n                register: register\n              }), errors.companyName && /*#__PURE__*/_jsx(\"div\", {\n                className: \"text-muted font-italic\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  className: \"text-danger font-weight-700\",\n                  children: errors.companyName.message\n                })\n              })]\n            }), /*#__PURE__*/_jsx(Sinput, {\n              label: \"Nom d'utilisateur\",\n              name: \"userName\",\n              placeholder: \"Entrez votre nom d'utilisateur\",\n              type: \"text\",\n              register: register\n            }), errors.userName && /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-muted font-italic\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: \"text-danger font-weight-700\",\n                children: errors.userName.message\n              })\n            }), /*#__PURE__*/_jsx(Sinput, {\n              label: \"Email\",\n              placeholder: \"Entrez votre adresse email\",\n              type: \"email\",\n              name: \"email\",\n              register: register\n            }), errors.email && /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-muted font-italic\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: \"text-danger font-weight-700\",\n                children: errors.email.message\n              })\n            }), /*#__PURE__*/_jsx(Sinput, {\n              label: \"Mot de passe\",\n              placeholder: \"Entrez votre mot de passe\",\n              type: show ? \"text\" : \"password\",\n              name: \"password\",\n              register: register,\n              icon: show ? \"fa fa-eye\" : \"fa fa-eye-slash\",\n              handleToggleshow: handleToggleshow,\n              append: true,\n              autoComplete: \"new-password\"\n            }), errors.password && /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-muted font-italic\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: \"text-danger font-weight-700\",\n                children: errors.password.message\n              })\n            }), /*#__PURE__*/_jsx(Sinput, {\n              label: \"Confirmer le mot de passe\",\n              placeholder: \"Entrez votre mot de passe\",\n              type: showc ? \"text\" : \"password\",\n              name: \"confirmpassword\",\n              registerOptions: {\n                required: true,\n                maxLength: 20\n              },\n              register: register,\n              icon: showc ? \"fa fa-eye\" : \"fa fa-eye-slash\",\n              handleToggleshow: handleToggleshowc,\n              append: true,\n              autocomplete: \"new-password\"\n            }), errors.confirmpassword && /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-muted font-italic\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: \"text-danger font-weight-700\",\n                children: errors.confirmpassword.message\n              })\n            }), /*#__PURE__*/_jsx(Row, {\n              className: \"my-0\",\n              children: /*#__PURE__*/_jsxs(Col, {\n                xs: \"12\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"custom-control custom-control-alternative custom-checkbox\",\n                  children: [/*#__PURE__*/_jsx(\"input\", {\n                    className: \"custom-control-input\",\n                    id: \"customCheckRegister\",\n                    type: \"checkbox\",\n                    name: \"term\",\n                    ref: register\n                  }), /*#__PURE__*/_jsx(\"label\", {\n                    className: \"custom-control-label\",\n                    htmlFor: \"customCheckRegister\",\n                    children: /*#__PURE__*/_jsxs(\"span\", {\n                      className: \"text-muted\",\n                      children: [\"J'ai lu et j'accepte les\", \" \", /*#__PURE__*/_jsx(\"a\", {\n                        href: \"#itguymax\",\n                        onClick: function onClick(e) {\n                          return e.preventDefault();\n                        },\n                        children: \"Conditions d'utilisation\"\n                      })]\n                    })\n                  })]\n                }), errors.term && /*#__PURE__*/_jsx(\"div\", {\n                  className: \"text-muted font-italic\",\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    className: \"text-danger font-weight-700\",\n                    children: errors.term.message\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsx(Captcha, {\n              recaptchaRef: recaptchaRef,\n              onChange: executeCaptcha\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"text-center\",\n              children: [errormsg && /*#__PURE__*/_jsx(\"div\", {\n                className: \"text-muted font-italic\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  className: \"text-danger font-weight-700\",\n                  children: errormsg\n                })\n              }), successmsg && /*#__PURE__*/_jsx(\"div\", {\n                className: \"text-muted font-italic\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  className: \"text-success font-weight-700\",\n                  children: successmsg\n                })\n              }), /*#__PURE__*/_jsx(Button, {\n                className: \"mt-3 mb-1\",\n                type: \"submit\",\n                style: {\n                  width: '50%',\n                  backgroundColor: '#679966',\n                  borderColor: '#679966'\n                },\n                children: \"Cr\\xE9er un compte\"\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsx(\"a\", {\n                  href: \"#itguymax\",\n                  onClick: function onClick(e) {\n                    return e.preventDefault();\n                  },\n                  children: /*#__PURE__*/_jsx(\"small\", {\n                    children: \"Vous avez d\\xE9j\\xE0 un compte?\"\n                  })\n                }), \" \", /*#__PURE__*/_jsx(\"a\", {\n                  href: \"/auth/login\",\n                  children: /*#__PURE__*/_jsx(\"small\", {\n                    className: \"text-bold font-weight-bold ml-1\",\n                    children: \"Se connecter\"\n                  })\n                })]\n              })]\n            })]\n          })\n        })\n      })\n    })\n  });\n}\n\nRegister.layout = Auth;\nexport default Register; // export async function getStaticProps(context) {\n//   const res = await fetch(`http://localhost:5000`)\n//   const data = await res.json()\n//  console.log(\"fffff props\", context);\n//   if (!data) {\n//     return {\n//       notFound: true,\n//     }\n//   }\n//   return {\n//     props: { user: data }, // will be passed to the page component as props\n//   }\n// }","map":null,"metadata":{},"sourceType":"module"}